
<script type="text/javascript">
function openTab(name, build){
var tab=Ext.getCmp('project-'+name +'-'+build);

if(tab) {
 if(tab.rendered) {
   tab.show();
   return;
 }
}
var tab=new Ext.Panel({
id: 'project-'+name+'-'+build,
autoScroll: true,
title: name,
plugins: new Ext.ux.TabCloseMenu(),
autoLoad: {url: '/dashboard/detail?project='+name, scripts: true,
nocache: true,
    text: "Loading...",
    timeout: 30},
closable:true
});
tab.on('close',function(p) {
 p.destroy();
 alert(p);
});
var c=Ext.getCmp('doc-body').add(tab);
//tab.load({url: '/dashboard/detail?project='+name, scripts: true});
c.show();
return false;

}

</script>
<link rel="stylesheet" type="text/css" href="/ext-2.0/resources/css/ext-all.css" />




<div id="welcome">
    <!-- <div class="col">
        <div id="search">     	
        </div>
    </div>-->
    <div class="col-last">
        <!-- <div class="res-block">
            <div class="res-block-inner">
                <h3>Additional Resources</h3>
                <ul>
                    <li><a href="../examples" target="_blank">Ext 2.0 Samples</a></li>
                    <li><a href="http://extjs.com/learn" target="_blank">Ext Learning Center</a></li>
                    <li><a href="http://extjs.com/learn/Ext_FAQ" target="_blank">FAQ</a></li>
                    <li><a href="http://extjs.com/learn/Tutorials" target="_blank">Tutorials</a></li>
                    <li><a href="http://extjs.com/learn/Ext_Manual" target="_blank">Ext Community Manual</a></li>
                    <li><a href="http://extjs.com/blog" target="_blank">Ext JS Blog</a></li>
                </ul>
            </div>
        </div>
        <div class="res-block">
            <div class="res-block-inner">
                <h3>Support</h3>
                <ul>
                    <li><a href="http://extjs.com/ext-store" target="_blank">Support Subscriptions</a></li>
                    <li><a href="http://extjs.com/forum" target="_blank">Community Forums</a></li>
                </ul>
            </div>
        </div>-->
        <div class="res-block">
            <div class="res-block-inner">
                <h3>Icon Legend</h3>
                <ul id="legend" style="list-style:none;margin-left:0;">
		            <li><img src="/images/passed.png" class="item-icon icon">Build passed</li>
		            <li><img src="/images/failed.png" class="item-icon icon">Build failed</li>
		           
		        </ul>
            </div>
        </div>
    </div>
    <div id="test" class="col">
    <div id="projects"  class="body-wrap">
    <h2>Projects</h2>
        <table cellspacing="0" class="member-table">
    
       <?php

while ($this->builds->hasNext()) {
    $build = $this->builds->next();
    $icon=$build->getStatus() == 1?'/images/passed.png':
                                           ($build->getStatus() == -1 ?'/images/stopped.png':'images/failed.png');
    $text=$build->getStatus() == 1   ?'success':
                                           ($build->getStatus() == -1 ?'stopped':'failed');
$detailUrl=<<<EOJ
openTab('{$build->getProject()->getName()}','{$build->getBuildTime()}');
EOJ;
?>
 <tr class="method-row">
        <td class="micon"><a class="exi" href="#expand">&nbsp;</a></td>
        <td class="sig">
        <a id="<?php echo $build->getProject()->getName(); ?>"></a>
            <a href="#<?php echo $build->getProject()->getName(); ?>" class="exi" onclick="<?php echo $detailUrl; ?>"><b><?php echo $build->getProject()->getName(); ?></b></a>            <div class="mdesc">
                        <div class="short"></div>
          
        </td>
        <td class="msource" nowrap="nowrap"><b><?php echo $build->getBuildTime()>0 ? date('Y-m-d H:i:s', $build->getBuildTime()) : ''; ?></b></td>
        <td class="msource" nowrap="nowrap"><b><?php echo $build->getLabel(); ?></b></td>
        <td class="msource"><img src="<?php echo $icon;?>"/></td>
    </tr>
<!-- <tr>
<td><a href=""><?php echo $build->getProject()->getName(); ?></a></td>
<td><?php echo $build->getBuildTime()>0 ? date('Y-m-d H:i:s', $build->getBuildTime()) : ''; ?></td>
<td><?php echo $build->getLabel(); ?></td>
<td bgcolor="<?php echo $bgColor; ?>" style="color:white;text-align:center"><?php echo $text; ?></td>
</tr>-->
<?php 
}
?>
</table>
</div>
</div>
</div>


